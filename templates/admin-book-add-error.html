<!DOCTYPE html>
<html lang="en">
<head>
  <title>CS425 Project</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width-device-width, initial-scale=1">
  <link rel="stylesheet" href="https://adityaparakh.000webhostapp.com/bootstrap.min.css" >
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<style>
.jumbotron{
  background-color:#29AB8D;
  color:white;
}
.jumbotron p{
  color:black;
  font-size: 40px;
  text-align:left;
  padding: 10px;
}
.tab-content{
  border-left: 1px solid #ddd;
  border-right: 1px solid #ddd;
  border-bottom: 1px solid #ddd;
  padding: 10px;
}
.nav-tabs{
  margin-bottom: 0;
}
.nav-tabs ul{
  color:#0f0f0f;
}
</style>
</head>
<body>

<nav class="navbar navbar-fixed-top">
  <div class="container bg-info">
    <ul class="nav navbar-nav">
      <p class="navbar-text">High School Library</p>
      <li><a data-toggle="tab" href="#overview">Overview</a></li>
      <li class="active"><a data-toggle="tab" href="#books">Books</a></li>
      <li><a data-toggle="tab" href="#users">Manage Users</a></li>
      <li><a data-toggle="tab" href="#courses">Manage Courses</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right" style="padding-right:10px">
      <p class="navbar-text">Signed in as: Admin</p>
      <li><button class="btn navbar-btn"><a href="/">Logout</a></button></li>
    </ul>
  </div>

</nav>
<div class="container bg-muted" style="padding:0px; background-color:white">
    <div class="tab-content" style="    margin-top:30px">

<!--THE OVERVIEW FOR THE USER IS SHOWN HERE-->
    <div id="overview" class="tab-pane fade in active">
      <h3>Overview</h3>
      {% block user %}
        <p>A brief summary of your account, {{ user["firstname"] }}
        </p>
      {% endblock %}
        <h3>Books requested</h3>
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>ISBN #</th>
                    <th>Course</th>
                    <th>Year </th>
                    <th>Due Date</th>
                    <th>Cost</th>
                    <th>Action</th>
                </tr>
            </thead>
            {% for data in allrequests() %}
            <tr>
              <th>{{ data['title'] }}</th>
              <th>{{ data['isbn'] }}</th>
              <th>{{ data['coursename'] }}</th>
              <th>{{ data['courseyear'] }}</th>
              <th>{{ data['quantity'] }}</th>
              <th>{{ data['cost'] }}</th>
                <th><button><a href="/grant_request/{{data['requestid']}}">Grant</button></th>
            </tr>
            {% endfor %}
        </table>
    </div>

<!--THE USERS BOOKS ARE HANDLED HERE-->
    <div id="books" class="tab-pane fade">
      <h3>Book Database</h3>
      <p>
          {% set data = availableBooks() %}
          Total number of books = {{ data[0] }}.<br>
          Total number borrowed = {{ data[1] }}.<br>
          Total number available = {{ data[2] }}.<br>
          <br><br>
          <em>You have entered an invalid ISBN #</em>
          <br>Search for a book:<br>
      </p>
      <form action="/books" class="form-inline">
          <div class="form-group">
            <input list = "book_list" type="text" name="bookname" class="form-control" placeholder="Book Name">
          </div>
          <button type="submit" class="btn btn-default">Submit</button>
        </form>
        <datalist id = "book_list">
            <option value="all books">
            {%  for data in bookTitles() %}
                <option value="{{ data['title'] }}">
            {% endfor %}
        </datalist>
        <br>

        Add a Book:<form action="/add_book" class="form-inline">
          <div class="form-group">
              <input type="text" class="form-control" name="ISBN" placeholder="ISBN #">
              <select class="form-control" name="Course">
                {%  for data in courses() %}
                    <option>{{ data['name'] }}</option>
                {% endfor %}
              </select>
              <select class="form-control" name="Year">
                {%  for data in year() %}
                    <option>{{ data['year'] }}</option>
                {% endfor %}
              </select>
              <select class="form-control" name="Semester">
                  <option>Fall</option>
                  <option>Spring</option>
                  <option>Summer</option>
              </select>
              </input>
              <input type="number" class="form-control" name="Quantity" placeholder="Quantity">
              <button type="submit" class="btn btn-default">Add Book</button>
          </div>
        </form>
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>ISBN #</th>
                    <th>Name</th>
                    <th>Course</th>
                    <th>Year</th>
                    <th>Semester</th>
                    <th>Cost</th>
                    <th>Quantity</th>
                    <th>Manage</th>
                </tr>
            </thead>
            <tbody>
                {% for data in groupBooks() %}
                <tr>
                  <th>{{ data['isbn'] }}</th>
                  <th>{{ data['title'] }}</th>
                  <th>{{ data['coursename'] }}</th>
                  <th>{{ data['courseyear'] }}</th>
                  <th>{{ data['coursesemester'] }}</th>
                  <th>{{ data['cost'] }}</th>
                  <th>{{ data['quantity'] }}</th>
                  <th><button type="submit" class="btn btn-default"><a href="/remove_book/{{ data['bookid'] }}">Remove</a></button></th>
                  <!--Student will be able to only borrow books that have been assigned-->
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

<!--THE STUDENT FEES TAB IS HANDLED HERE-->
    <div id="users" class="tab-pane fade">
      <h3>Manage Users</h3>
        <p>Manage the users for the system.
        </p>
          <form class="form-inline">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Enter User ID #">
          </div>
          <button type="submit" class="btn btn-default">Submit</button>
        </form>
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>User ID</th>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Role / Access Level</th>
              <th>Manage</th>
            </tr>
          </thead>
          <tbody>
            {% for data in allusers() %}
                <tr>
                  <th>{{ data['id'] }}</th>
                  <th>{{ data['firstname'] }}</th>
                  <th>{{ data['lastname'] }}</th>
                  <th>{{ data['access_level'] }}</th>
                  <th><button type="submit" class="btn btn-default"><a href="/remove_user/{{ data['id'] }} / {{ data['access_level'] }}">Remove User</a></button></th>
                </tr>
            {%  endfor %}
          </tbody>
        </table>
    </div>

<!--THE RELEVANT CONTACT INFORMATION IS HANDLED HERE-->
    <div id="courses" class="tab-pane fade">
      <!--<h3 style="text-align:center">Useful Contacts</h3>-->
        <h3>Manage Courses</h3>
        <!--

        <form class="form-inline">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Enter Course">
          </div>
          <button type="submit" class="btn btn-default">Submit</button>
        </form>

    !-->
      <table class="table table-hover table-bordered table-default">
          <thead>
            <tr>
              <td>Course</td>
                <td>Book Name</td>
              <td>Student ID</td>

                <td>Student Name</td>
              <td>Check-Out Date</td>
              <td>Due Date</td>
              <td>Overdue?</td>
              <td>Email</td>
            </tr>
          </thead>
          {% for book in allbookscourses() %}
          <tbody>
              <td>{{ book['coursename'] }} </td>
              <td>{{ book['title'] }}</td>
              <td>{{ book['studentid'] }}</td>

              <td>{{ book['firstname'] }} {{book['lastname']}}</td>
              <td>{{ book['datecheckedout'] }}</td>
              <td>{{ book['duedate'] }}</td>
              <td></td>
              <td><button type="email" class="btn btn-default">Contact</button></td>
          </tbody>
          {%  endfor %}
        </table>
    </div>
  </div>
  </div>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>